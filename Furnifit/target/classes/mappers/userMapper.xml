<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
                        
<mapper namespace="kr.or.kosta.blog.user.dao.UserDao">
	
	<select id="login" resultType="user" >
		SELECT userid, 
		       userpw, 
		       username 
		FROM   tbl_user 
		WHERE  userid = #{userid} 
		       AND userpw = #{userpw}
	</select>
	
	<update id="update" parameterType="map">
		UPDATE tbl_user 
		SET    sessionid = #{sessionid}, 
		       sessionlimit = #{sessionlimit} 
		WHERE  userid = #{userid}
	</update>
	
	<select id="read" parameterType="string" resultType="user">
		SELECT userid, 
		       userpw, 
		       username, 
		       userpoint
		FROM   tbl_user 
		WHERE  sessionid = #{sessionid} 
		       AND sessionlimit > SYSDATE
	</select>
	
</mapper>